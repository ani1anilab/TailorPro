<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tailor Management Dashboard</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="app-container">
        <!-- Mobile Sidebar Overlay -->
        <div class="sidebar-overlay" id="sidebarOverlay"></div>
        
        <!-- Sidebar Navigation -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h1><i class="fas fa-scissors"></i> TailorPro</h1>
            </div>
            <nav class="sidebar-nav">
                <button class="nav-btn active" data-section="dashboard">
                    <i class="fas fa-tachometer-alt"></i> Dashboard
                </button>
                <button class="nav-btn" data-section="customers">
                    <i class="fas fa-users"></i> Customers
                </button>
                <button class="nav-btn" data-section="measurements">
                    <i class="fas fa-tape"></i> Measurements
                </button>
                <button class="nav-btn" data-section="orders">
                    <i class="fas fa-shopping-bag"></i> Orders
                </button>
                <button class="nav-btn" data-section="team">
                    <i class="fas fa-users-cog"></i> Team Manage
                </button>
                <button class="nav-btn" data-section="export">
                    <i class="fas fa-download"></i> Export Data
                </button>
                <button class="nav-btn" data-section="settings">
                    <i class="fas fa-cog"></i> Settings
                </button>
            </nav>
            <div class="theme-toggle">
                <button id="themeToggle" class="theme-btn" title="Toggle Dark Mode">
                    <i class="fas fa-moon"></i>
                </button>
            </div>
            <div class="language-selector">
                <select id="languageSelect">
                    <option value="en">English</option>
                    <option value="hi">हिंदी</option>
                    <option value="gu">ગુજરાતી</option>
                </select>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Mobile Header -->
            <div class="mobile-header">
                <button class="mobile-menu-toggle" id="mobileMenuToggle">
                    <i class="fas fa-bars"></i>
                </button>
                <h2 id="mobileHeaderTitle">Dashboard</h2>
            </div>

            <!-- Dashboard Section -->
            <section id="dashboard" class="content-section active">
                <div class="section-header">
                    <h2>Dashboard Overview</h2>
                    <p class="section-subtitle">Welcome to your tailor management system</p>
                </div>
                <div class="stats-grid">
                    <div class="stat-card">
                        <i class="fas fa-users stat-icon"></i>
                        <div class="stat-info">
                            <h3 id="totalCustomers">0</h3>
                            <p>Total Customers</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <i class="fas fa-clock stat-icon"></i>
                        <div class="stat-info">
                            <h3 id="pendingOrders">0</h3>
                            <p>Pending Orders</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <i class="fas fa-check-circle stat-icon"></i>
                        <div class="stat-info">
                            <h3 id="completedOrders">0</h3>
                            <p>Completed Orders</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <i class="fas fa-chart-line stat-icon"></i>
                        <div class="stat-info">
                            <h3 id="totalRevenue">₹0</h3>
                            <p>Total Revenue</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Customers Section -->
            <section id="customers" class="content-section">
                <div class="section-header">
                    <h2>Customer Management</h2>
                    <button class="btn btn-primary" id="addCustomerBtn">
                        <i class="fas fa-plus"></i> Add Customer
                    </button>
                </div>
                <div class="search-container">
                    <input type="text" id="customerSearch" placeholder="Search customers..." class="search-input">
                </div>
                <div class="table-container">
                    <table class="data-table" id="customersTable">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Phone</th>
                                <th>Village</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="customersTableBody">
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Measurements Section -->
            <section id="measurements" class="content-section">
                <div class="section-header">
                    <h2>Measurements</h2>
                    <div style="display: flex; gap: 1rem;">
                        <button class="btn btn-secondary" id="manageFieldsBtn">
                            <i class="fas fa-cog"></i> Manage Fields
                        </button>
                        <button class="btn btn-primary" id="addMeasurementBtn">
                            <i class="fas fa-plus"></i> Add Measurement
                        </button>
                    </div>
                </div>
                <div class="customer-selector">
                    <select id="measurementCustomerSelect" class="minimal-select">
                        <option value="">All Customers</option>
                    </select>
                </div>
                <div class="search-container">
                    <input type="text" id="measurementSearch" placeholder="Search measurements by customer, clothing type, or values..." class="search-input">
                </div>
                <div id="measurementsList" class="measurements-grid">
                </div>
            </section>

            <!-- Orders Section -->
            <section id="orders" class="content-section">
                <div class="section-header">
                    <h2>Order Management</h2>
                    <button class="btn btn-primary" id="addOrderBtn">
                        <i class="fas fa-plus"></i> Add Order
                    </button>
                </div>
                <div class="orders-container" id="ordersList">
                </div>
            </section>

            <!-- Export Section -->
            <section id="export" class="content-section">
                <div class="section-header">
                    <h2>Export Data</h2>
                </div>
                <div class="export-options">
                    <button class="btn btn-secondary" id="exportCustomers">
                        <i class="fas fa-file-csv"></i> Export Customers
                    </button>
                    <button class="btn btn-secondary" id="exportMeasurements">
                        <i class="fas fa-file-csv"></i> Export Measurements
                    </button>
                    <button class="btn btn-secondary" id="exportOrders">
                        <i class="fas fa-file-csv"></i> Export Orders
                    </button>
                </div>
            </section>

            <!-- Settings Section -->
            <section id="settings" class="content-section">
                <div class="section-header">
                    <h2>Settings</h2>
                    <p class="section-subtitle">Manage your application preferences and measurement fields</p>
                </div>
                
                <!-- Settings tabs navigation - Only measurements now -->
                <div class="settings-tabs-nav">
                    <div class="settings-tabs">
                        <button class="settings-tab-btn active" data-tab="measurement">
                            <i class="fas fa-tape"></i> Measurements
                        </button>
                    </div>
                </div>
                
                <div class="settings-container">
                    <div class="settings-card">
                        <h3><i class="fas fa-tape"></i> Measurement Settings</h3>
                        <div class="setting-item">
                            <label for="sizeFormatSettings">Measurement Unit</label>
                            <select id="sizeFormatSettings" class="minimal-select">
                                <option value="inches">Inches (")</option>
                                <option value="centimeters">Centimeters (cm)</option>
                                <option value="millimeters">Millimeters (mm)</option>
                            </select>
                        </div>
                        <div class="setting-item">
                            <label for="dateFormatSettings">Date Format</label>
                            <select id="dateFormatSettings" class="minimal-select">
                                <option value="MM/DD/YYYY">MM/DD/YYYY (12/31/2023)</option>
                                <option value="DD/MM/YYYY">DD/MM/YYYY (31/12/2023)</option>
                                <option value="YYYY-MM-DD">YYYY-MM-DD (2023-12-31)</option>
                                <option value="DD-MM-YYYY">DD-MM-YYYY (31-12-2023)</option>
                                <option value="MMM DD, YYYY">MMM DD, YYYY (Dec 31, 2023)</option>
                                <option value="DD MMM YYYY">DD MMM YYYY (31 Dec 2023)</option>
                            </select>
                        </div>
                        <div class="setting-item">
                            <label>Default Measurement Fields</label>
                            <div id="defaultFieldsSettings" class="fields-container">
                                <!-- Default fields will be loaded here -->
                            </div>
                        </div>
                        <div class="setting-item">
                            <label>Custom Measurement Fields</label>
                            <div id="customFieldsSettings" class="fields-container">
                                <!-- Custom fields will be loaded here -->
                            </div>
                            <div class="add-field-section">
                                <input type="text" id="newFieldNameSettings" placeholder="Enter field name (e.g., Neck, Wrist, Ankle)">
                                <button class="btn btn-primary" onclick="Settings.addCustomField()">
                                    <i class="fas fa-plus"></i> Add Field
                                </button>
                            </div>
                            <small style="display: block; margin-top: 0.5rem; color: var(--text-secondary);">
                                <i class="fas fa-info-circle"></i> Add custom measurement fields that will appear in all clothing types
                            </small>
                        </div>

                    <div class="settings-card">
                        <h3><i class="fas fa-palette"></i> Appearance</h3>
                        <div class="setting-item">
                            <label>Theme</label>
                            <div class="theme-options">
                                <button class="btn btn-secondary theme-option" data-theme="light">
                                    <i class="fas fa-sun"></i> Light
                                </button>
                                <button class="btn btn-secondary theme-option" data-theme="dark">
                                    <i class="fas fa-moon"></i> Dark
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="settings-card">
                        <h3><i class="fas fa-language"></i> Language</h3>
                        <div class="setting-item">
                            <label for="languageSettings">Application Language</label>
                            <select id="languageSettings" class="minimal-select">
                                <option value="en">English</option>
                                <option value="hi">हिंदी</option>
                                <option value="gu">ગુજરાતી</option>
                            </select>
                        </div>
                    </div>

                    <div class="settings-card">
                        <h3><i class="fas fa-database"></i> Data Management</h3>
                        <div class="setting-item">
                            <label>Backup & Restore</label>
                            <div class="backup-options">
                                <button class="btn btn-secondary" onclick="Settings.exportData()">
                                    <i class="fas fa-download"></i> Export All Data
                                </button>
                                <button class="btn btn-secondary" onclick="Settings.importData()">
                                    <i class="fas fa-upload"></i> Import Data
                                </button>
                            </div>
                        </div>
                        <div class="setting-item">
                            <label>Reset Data</label>
                            <button class="btn btn-danger" onclick="Settings.resetAllData()">
                                <i class="fas fa-trash"></i> Reset All Data
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Team Management Section -->
            <section id="team" class="content-section">
                <div class="section-header">
                    <h2>Team Management</h2>
                    <button class="btn btn-primary" id="addTeamMemberBtn">
                        <i class="fas fa-plus"></i> Add Team Member
                    </button>
                </div>
                <div class="team-container">
                    <div class="team-grid" id="teamMembersList">
                        <!-- Team members will be loaded here -->
                    </div>
                </div>
            </section>
        </main>

        <!-- Custom Popup Modal -->
        <div id="customPopup" class="modal" style="display: none;">
            <div class="modal-content popup-content">
                <span class="close">&times;</span>
                <div class="popup-icon">
                    <i id="popupIcon" class="fas fa-exclamation-triangle"></i>
                </div>
                <h3 id="popupTitle">Confirm Action</h3>
                <p id="popupMessage">Are you sure you want to perform this action?</p>
                <div class="popup-actions">
                    <button id="popupConfirm" class="btn btn-primary">Confirm</button>
                    <button id="popupCancel" class="btn btn-secondary">Cancel</button>
                </div>
            </div>
        </div>

        <!-- Modals -->
        <div id="customerModal" class="modal" style="display: none;">
            <div class="modal-content">
                <span class="close">&times;</span>
                <h3>Customer Details</h3>
                <form id="customerForm">
                    <input type="hidden" id="customerId">
                    <div class="form-group">
                        <label for="customerName">Name</label>
                        <input type="text" id="customerName" required>
                    </div>
                    <div class="form-group">
                        <label for="customerPhone">Phone</label>
                        <input type="tel" id="customerPhone" required>
                    </div>
                    <div class="form-group">
                        <label for="customerVillage">Village</label>
                        <input type="text" id="customerVillage" required>
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">Save</button>
                        <button type="button" class="btn btn-secondary" id="cancelCustomer">Cancel</button>
                    </div>
                </form>
            </div>
        </div>

        <div id="measurementModal" class="modal" style="display: none;">
            <div class="modal-content">
                <span class="close">&times;</span>
                <h3>Measurement Details</h3>
                <form id="measurementForm">
                    <input type="hidden" id="measurementId">
                    <div class="form-group">
                        <label for="measurementCustomer">Customer</label>
                        <select id="measurementCustomer" required>
                            <option value="">Select Customer</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="clothingType">Clothing Type</label>
                        <select id="clothingType" required>
                            <option value="shirt">Shirt</option>
                            <option value="pant">Pant</option>
                            <option value="suit">Suit</option>
                            <option value="dress">Dress</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div id="customTypeContainer" class="form-group" style="display: none;">
                        <label for="customClothingType">Custom Clothing Type</label>
                        <input type="text" id="customClothingType" placeholder="Enter custom clothing type">
                    </div>
                    <div id="measurementFields" class="measurement-fields">
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">Save</button>
                        <button type="button" class="btn btn-secondary" id="cancelMeasurement">Cancel</button>
                    </div>
                </form>
            </div>
        </div>

        <div id="orderModal" class="modal" style="display: none;">
            <div class="modal-content">
                <span class="close">&times;</span>
                <h3>Order Details</h3>
                <form id="orderForm">
                    <input type="hidden" id="orderId">
                    <div class="form-group">
                        <label for="orderCustomer">Customer</label>
                        <select id="orderCustomer" required>
                            <option value="">Select Customer</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="orderTeamMember">Assigned Team Member</label>
                        <select id="orderTeamMember">
                            <option value="">Select Team Member (Optional)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="orderDescription">Description</label>
                        <textarea id="orderDescription" required></textarea>
                    </div>
                    <div class="form-group">
                        <label for="orderPrice">Price</label>
                        <input type="number" id="orderPrice" min="0" step="0.01" required>
                    </div>
                    <div class="form-group">
                        <label for="orderStatus">Status</label>
                        <select id="orderStatus" required>
                            <option value="pending">Pending</option>
                            <option value="working">Working</option>
                            <option value="delivered">Delivered</option>
                        </select>
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">Save</button>
                        <button type="button" class="btn btn-secondary" id="cancelOrder">Cancel</button>
                    </div>
                </form>
            </div>
        </div>

        <div id="teamMemberModal" class="modal" style="display: none;">
            <div class="modal-content">
                <span class="close">&times;</span>
                <h3>Team Member Details</h3>
                <form id="teamMemberForm">
                    <input type="hidden" id="teamMemberId">
                    <div class="form-group">
                        <label for="teamMemberName">Name</label>
                        <input type="text" id="teamMemberName" required>
                    </div>
                    <div class="form-group">
                        <label for="teamMemberRole">Role</label>
                        <input type="text" id="teamMemberRole" placeholder="e.g., Master Tailor, Assistant" required>
                    </div>
                    <div class="form-group">
                        <label for="teamMemberPhone">Phone</label>
                        <input type="tel" id="teamMemberPhone">
                    </div>
                    <div class="form-group">
                        <label for="teamMemberEmail">Email</label>
                        <input type="email" id="teamMemberEmail">
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">Save</button>
                        <button type="button" class="btn btn-secondary" id="cancelTeamMember">Cancel</button>
                    </div>
                </form>
            </div>
        </div>

        <script src="storage.js"></script>
        <script src="utils.js"></script>
        <script src="translation.js"></script>
        <script src="popup.js"></script>
        <script src="customers.js"></script>
        <script src="measurementFields.js"></script>
        <script src="measurements.js"></script>
        <script src="orders.js"></script>
        <script src="export.js"></script>
        <script src="dashboard.js"></script>
        <script src="settings.js"></script>
        <script src="team.js"></script>
        <script>
            // Initialize all modules when DOM is loaded
            document.addEventListener('DOMContentLoaded', () => {
                // Initialize Dashboard first
                if (typeof Dashboard !== 'undefined') {
                    Dashboard.init();
                } else {
                    console.error('Dashboard is not defined');
                }
                
                // Initialize other modules
                if (typeof Customers !== 'undefined') {
                    Customers.init();
                }
                if (typeof Measurements !== 'undefined') {
                    Measurements.init();
                }
                if (typeof Orders !== 'undefined') {
                    Orders.init();
                }
                if (typeof Export !== 'undefined') {
                    Export.init();
                }
                if (typeof Settings !== 'undefined') {
                    Settings.init();
                }
                if (typeof Team !== 'undefined') {
                    Team.init();
                }
            });

            // Add mobile menu functionality
            document.addEventListener('DOMContentLoaded', () => {
                const mobileMenuToggle = document.getElementById('mobileMenuToggle');
                const sidebar = document.getElementById('sidebar');
                const sidebarOverlay = document.getElementById('sidebarOverlay');
                const mobileHeaderTitle = document.getElementById('mobileHeaderTitle');
                
                // Toggle sidebar menu
                function toggleSidebar() {
                    sidebar.classList.toggle('open');
                    sidebarOverlay.classList.toggle('active');
                    
                    // Update menu icon
                    const icon = mobileMenuToggle.querySelector('i');
                    icon.className = sidebar.classList.contains('open') ? 'fas fa-times' : 'fas fa-bars';
                }
                
                // Close sidebar
                function closeSidebar() {
                    sidebar.classList.remove('open');
                    sidebarOverlay.classList.remove('active');
                    const icon = mobileMenuToggle.querySelector('i');
                    icon.className = 'fas fa-bars';
                }
                
                // Event listeners
                mobileMenuToggle.addEventListener('click', toggleSidebar);
                sidebarOverlay.addEventListener('click', closeSidebar);
                
                // Close sidebar when clicking on nav items
                document.querySelectorAll('.nav-btn').forEach(btn => {
                    btn.addEventListener('click', closeSidebar);
                });
                
                // Update mobile header title based on active section
                document.querySelectorAll('.nav-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const section = e.currentTarget.getAttribute('data-section');
                        const titleMap = {
                            'dashboard': 'Dashboard',
                            'customers': 'Customers',
                            'measurements': 'Measurements',
                            'orders': 'Orders',
                            'team': 'Team Manage',
                            'export': 'Export Data',
                            'settings': 'Settings'
                        };
                        mobileHeaderTitle.textContent = titleMap[section] || 'Dashboard';
                    });
                });
                
                // Handle window resize
                window.addEventListener('resize', () => {
                    if (window.innerWidth > 768) {
                        closeSidebar();
                    }
                });
            });
        </script>
    </div>
</body>
</html>
